{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\UniofHelsinki_FullStackOpen_part3\\\\part3\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\UniofHelsinki_FullStackOpen_part3\\\\part3\",\"filename\":\"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\UniofHelsinki_FullStackOpen_part3\\\\part3\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\UniofHelsinki_FullStackOpen_part3\\\\part3\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar express = require('express');\nvar _require = require('express'),\n  json = _require.json;\nvar morgan = require('morgan');\nvar app = express();\napp.use(morgan('tiny'));\nmorgan.token('body', function (req) {\n  return JSON.stringify(req.body);\n});\napp.use(morgan(':method :url :status :res[content-length] - :response-time ms :body'));\nvar persons = [{\n  \"id\": 1,\n  \"name\": \"Arto Hellas\",\n  \"number\": \"040-123456\"\n}, {\n  \"id\": 2,\n  \"name\": \"Ada Lovelace\",\n  \"number\": \"39-44-5323523\"\n}, {\n  \"id\": 3,\n  \"name\": \"Dan Abramov\",\n  \"number\": \"12-43-234345\"\n}, {\n  \"id\": 4,\n  \"name\": \"Mary Poppendieck\",\n  \"number\": \"39-23-6423122\"\n}, {\n  \"id\": 5,\n  \"name\": \"Pinky\",\n  \"number\": \"39-23-6423122\"\n}];\napp.use(express.json());\napp.get('/', function (request, response) {\n  response.send('<h1>Hello World!!</h1>');\n});\napp.get('/api/persons', function (request, response) {\n  response.json(persons);\n});\nfunction checkTime(i) {\n  if (i < 10) {\n    i = \"0\" + i;\n  }\n  return i;\n}\nfunction getCurrentDateTime() {\n  var now = new Date();\n  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  var day = days[now.getDay()];\n  var month = months[now.getMonth()];\n  var date = now.getDate();\n  var year = now.getFullYear();\n  var h = now.getHours();\n  var m = now.getMinutes();\n  var s = now.getSeconds();\n  m = checkTime(m);\n  s = checkTime(s);\n  return \"\".concat(day, \" \").concat(month, \" \").concat(date, \" \").concat(year, \" \").concat(h, \":\").concat(m, \":\").concat(s, \"  GMT+0200 (Eastern European Standard Time)\");\n}\napp.get('/info', function (request, response) {\n  var param1 = persons.length;\n  var param2 = getCurrentDateTime();\n  response.send(\"Phonebook has info for \".concat(param1, \" people <br/><br/>\").concat(param2));\n});\nvar generateId = function generateId() {\n  var maxId = persons.length > 0 ? Math.max.apply(Math, _toConsumableArray(persons.map(function (n) {\n    return n.id;\n  }))) : 0;\n  return maxId + 1;\n};\napp.post('/api/persons', function (request, response) {\n  var body = request.body;\n  console.log(request.body);\n  if (!body.name || !body.number) {\n    response.status(400).json({\n      error: \"Name or number is missing\"\n    });\n  }\n  var value = false;\n  persons.map(function (person) {\n    if (person.name == body.name) {\n      value = true;\n    }\n  });\n  if (value) {\n    response.status(400).json({\n      error: \"Name must be unique\"\n    });\n  } else {\n    var person = {\n      id: generateId(),\n      name: body.name,\n      number: body.number\n    };\n    persons = persons.concat(person);\n    response.json(person);\n  }\n});\napp.get('/api/persons/:id', function (request, response) {\n  var id = Number(request.params.id);\n  var person = persons.find(function (person) {\n    return person.id === id;\n  });\n  if (person) {\n    response.json(person);\n  } else {\n    response.status(404).send('Person not found');\n  }\n});\napp[\"delete\"]('/delete/:id', function (request, response) {\n  var id = Number(request.params.id);\n  persons = persons.filter(function (person) {\n    return person.id !== id;\n  });\n  response.send(\"\".concat(id, \" Deleted!\"));\n});\nvar PORT = 3001;\napp.listen(PORT, function () {\n  console.log(\"Server running on port \".concat(PORT));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIl9yZXF1aXJlIiwianNvbiIsIm1vcmdhbiIsImFwcCIsInVzZSIsInRva2VuIiwicmVxIiwiSlNPTiIsInN0cmluZ2lmeSIsImJvZHkiLCJwZXJzb25zIiwiZ2V0IiwicmVxdWVzdCIsInJlc3BvbnNlIiwic2VuZCIsImNoZWNrVGltZSIsImkiLCJnZXRDdXJyZW50RGF0ZVRpbWUiLCJub3ciLCJEYXRlIiwiZGF5cyIsIm1vbnRocyIsImRheSIsImdldERheSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXRlIiwiZ2V0RGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsImgiLCJnZXRIb3VycyIsIm0iLCJnZXRNaW51dGVzIiwicyIsImdldFNlY29uZHMiLCJjb25jYXQiLCJwYXJhbTEiLCJsZW5ndGgiLCJwYXJhbTIiLCJnZW5lcmF0ZUlkIiwibWF4SWQiLCJNYXRoIiwibWF4IiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJtYXAiLCJuIiwiaWQiLCJwb3N0IiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJudW1iZXIiLCJzdGF0dXMiLCJlcnJvciIsInZhbHVlIiwicGVyc29uIiwiTnVtYmVyIiwicGFyYW1zIiwiZmluZCIsImZpbHRlciIsIlBPUlQiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcVXNlclxcRG9jdW1lbnRzXFxHaXRIdWJcXFVuaW9mSGVsc2lua2lfRnVsbFN0YWNrT3Blbl9wYXJ0M1xccGFydDNcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxyXG5jb25zdCB7IGpzb24gfSA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxyXG5jb25zdCBtb3JnYW4gPSByZXF1aXJlKCdtb3JnYW4nKVxyXG5cclxuXHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKClcclxuYXBwLnVzZShtb3JnYW4oJ3RpbnknKSlcclxuXHJcbm1vcmdhbi50b2tlbignYm9keScsIHJlcSA9PiB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpXHJcbiAgfSlcclxuXHJcbmFwcC51c2UobW9yZ2FuKCc6bWV0aG9kIDp1cmwgOnN0YXR1cyA6cmVzW2NvbnRlbnQtbGVuZ3RoXSAtIDpyZXNwb25zZS10aW1lIG1zIDpib2R5JykpXHJcblxyXG5sZXQgcGVyc29ucyA9IFtcclxuICAgIHtcclxuICAgICAgICBcImlkXCI6IDEsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwiQXJ0byBIZWxsYXNcIixcclxuICAgICAgICBcIm51bWJlclwiOiBcIjA0MC0xMjM0NTZcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImlkXCI6IDIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwiQWRhIExvdmVsYWNlXCIsXHJcbiAgICAgICAgXCJudW1iZXJcIjogXCIzOS00NC01MzIzNTIzXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJpZFwiOiAzLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIkRhbiBBYnJhbW92XCIsXHJcbiAgICAgICAgXCJudW1iZXJcIjogXCIxMi00My0yMzQzNDVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcImlkXCI6IDQsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwiTWFyeSBQb3BwZW5kaWVja1wiLFxyXG4gICAgICAgIFwibnVtYmVyXCI6IFwiMzktMjMtNjQyMzEyMlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwiaWRcIjogNSxcclxuICAgICAgICBcIm5hbWVcIjogXCJQaW5reVwiLFxyXG4gICAgICAgIFwibnVtYmVyXCI6IFwiMzktMjMtNjQyMzEyMlwiXHJcbiAgICB9XHJcbl1cclxuYXBwLnVzZShleHByZXNzLmpzb24oKSlcclxuXHJcbmFwcC5nZXQoJy8nLCAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcclxuICAgIHJlc3BvbnNlLnNlbmQoJzxoMT5IZWxsbyBXb3JsZCEhPC9oMT4nKVxyXG59KVxyXG5cclxuYXBwLmdldCgnL2FwaS9wZXJzb25zJywgKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XHJcbiAgICByZXNwb25zZS5qc29uKHBlcnNvbnMpXHJcbn0pXHJcblxyXG5cclxuZnVuY3Rpb24gY2hlY2tUaW1lKGkpIHtcclxuICBpZiAoaSA8IDEwKSB7XHJcbiAgICBpID0gXCIwXCIgKyBpXHJcbiAgfVxyXG4gIHJldHVybiBpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEN1cnJlbnREYXRlVGltZSgpIHtcclxuICB2YXIgbm93ID0gbmV3IERhdGUoKVxyXG4gIHZhciBkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddXHJcbiAgdmFyIG1vbnRocyA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddXHJcbiAgdmFyIGRheSA9IGRheXNbbm93LmdldERheSgpXVxyXG4gIHZhciBtb250aCA9IG1vbnRoc1tub3cuZ2V0TW9udGgoKV1cclxuICB2YXIgZGF0ZSA9IG5vdy5nZXREYXRlKClcclxuICB2YXIgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpXHJcbiAgdmFyIGggPSBub3cuZ2V0SG91cnMoKVxyXG4gIHZhciBtID0gbm93LmdldE1pbnV0ZXMoKVxyXG4gIHZhciBzID0gbm93LmdldFNlY29uZHMoKVxyXG4gIG0gPSBjaGVja1RpbWUobSlcclxuICBzID0gY2hlY2tUaW1lKHMpXHJcblxyXG4gIHJldHVybiBgJHtkYXl9ICR7bW9udGh9ICR7ZGF0ZX0gJHt5ZWFyfSAke2h9OiR7bX06JHtzfSAgR01UKzAyMDAgKEVhc3Rlcm4gRXVyb3BlYW4gU3RhbmRhcmQgVGltZSlgXHJcbn1cclxuXHJcbmFwcC5nZXQoJy9pbmZvJywgKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XHJcbiAgY29uc3QgcGFyYW0xID0gcGVyc29ucy5sZW5ndGg7XHJcbiAgY29uc3QgcGFyYW0yID0gZ2V0Q3VycmVudERhdGVUaW1lKCk7XHJcbiAgcmVzcG9uc2Uuc2VuZChgUGhvbmVib29rIGhhcyBpbmZvIGZvciAke3BhcmFtMX0gcGVvcGxlIDxici8+PGJyLz4ke3BhcmFtMn1gKVxyXG59KVxyXG5cclxuY29uc3QgZ2VuZXJhdGVJZCA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1heElkID0gcGVyc29ucy5sZW5ndGggPiAwXHJcbiAgICAgICAgPyBNYXRoLm1heCguLi5wZXJzb25zLm1hcChuID0+IG4uaWQpKVxyXG4gICAgICAgIDogMFxyXG4gICAgcmV0dXJuIG1heElkICsgMVxyXG59XHJcblxyXG5hcHAucG9zdCgnL2FwaS9wZXJzb25zJywgKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XHJcbiAgICBjb25zdCBib2R5ID0gcmVxdWVzdC5ib2R5XHJcbiAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LmJvZHkpXHJcblxyXG5cclxuaWYgKCFib2R5Lm5hbWUgfHwgIWJvZHkubnVtYmVyKSB7XHJcbiAgICByZXNwb25zZS5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTmFtZSBvciBudW1iZXIgaXMgbWlzc2luZ1wiIH0pXHJcbn1cclxuXHJcbiAgICBsZXQgdmFsdWUgPSBmYWxzZSBcclxuICAgIHBlcnNvbnMubWFwKHBlcnNvbiA9PiB7XHJcbiAgICAgICAgaWYocGVyc29uLm5hbWU9PWJvZHkubmFtZSkge3ZhbHVlID0gdHJ1ZX1cclxuICAgIH0pXHJcblxyXG4gICAgaWYodmFsdWUpe1xyXG4gICAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJOYW1lIG11c3QgYmUgdW5pcXVlXCIgfSlcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgY29uc3QgcGVyc29uID0ge1xyXG4gICAgICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxyXG4gICAgICAgICAgICBuYW1lOiBib2R5Lm5hbWUsXHJcbiAgICAgICAgICAgIG51bWJlcjogYm9keS5udW1iZXIsXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBwZXJzb25zID0gcGVyc29ucy5jb25jYXQocGVyc29uKVxyXG4gICAgICAgIHJlc3BvbnNlLmpzb24ocGVyc29uKVxyXG4gICAgfVxyXG59KVxyXG5cclxuYXBwLmdldCgnL2FwaS9wZXJzb25zLzppZCcsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSBOdW1iZXIocmVxdWVzdC5wYXJhbXMuaWQpXHJcbiAgICBjb25zdCBwZXJzb24gPSBwZXJzb25zLmZpbmQocGVyc29uID0+IHBlcnNvbi5pZCA9PT0gaWQpXHJcbiAgICBpZiAocGVyc29uKSB7XHJcbiAgICAgICAgcmVzcG9uc2UuanNvbihwZXJzb24pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDQpLnNlbmQoJ1BlcnNvbiBub3QgZm91bmQnKVxyXG4gICAgfVxyXG59KVxyXG5cclxuYXBwLmRlbGV0ZSgnL2RlbGV0ZS86aWQnLCAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IGlkID0gTnVtYmVyKHJlcXVlc3QucGFyYW1zLmlkKVxyXG4gICAgcGVyc29ucyA9IHBlcnNvbnMuZmlsdGVyKHBlcnNvbiA9PiBwZXJzb24uaWQgIT09IGlkKVxyXG4gICAgcmVzcG9uc2Uuc2VuZChgJHtpZH0gRGVsZXRlZCFgKVxyXG59KVxyXG5cclxuY29uc3QgUE9SVCA9IDMwMDE7XHJcbmFwcC5saXN0ZW4oUE9SVCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApXHJcblxyXG59KSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFNQSxPQUFPLEdBQUdD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","map":{"version":3,"names":["express","require","_require","json","morgan","app","use","token","req","JSON","stringify","body","persons","get","request","response","send","checkTime","i","getCurrentDateTime","now","Date","days","months","day","getDay","month","getMonth","date","getDate","year","getFullYear","h","getHours","m","getMinutes","s","getSeconds","concat","param1","length","param2","generateId","maxId","Math","max","apply","_toConsumableArray","map","n","id","post","console","log","name","number","status","error","value","person","Number","params","find","filter","PORT","listen"],"sourceRoot":"C:\\Users\\User\\Documents\\GitHub\\UniofHelsinki_FullStackOpen_part3\\part3\\","sources":["index.js"],"sourcesContent":["const express = require('express')\r\nconst { json } = require('express')\r\nconst morgan = require('morgan')\r\n\r\n\r\n\r\nconst app = express()\r\napp.use(morgan('tiny'))\r\n\r\nmorgan.token('body', req => {\r\n    return JSON.stringify(req.body)\r\n  })\r\n\r\napp.use(morgan(':method :url :status :res[content-length] - :response-time ms :body'))\r\n\r\nlet persons = [\r\n    {\r\n        \"id\": 1,\r\n        \"name\": \"Arto Hellas\",\r\n        \"number\": \"040-123456\"\r\n    },\r\n    {\r\n        \"id\": 2,\r\n        \"name\": \"Ada Lovelace\",\r\n        \"number\": \"39-44-5323523\"\r\n    },\r\n    {\r\n        \"id\": 3,\r\n        \"name\": \"Dan Abramov\",\r\n        \"number\": \"12-43-234345\"\r\n    },\r\n    {\r\n        \"id\": 4,\r\n        \"name\": \"Mary Poppendieck\",\r\n        \"number\": \"39-23-6423122\"\r\n    },\r\n    {\r\n        \"id\": 5,\r\n        \"name\": \"Pinky\",\r\n        \"number\": \"39-23-6423122\"\r\n    }\r\n]\r\napp.use(express.json())\r\n\r\napp.get('/', (request, response) => {\r\n    response.send('<h1>Hello World!!</h1>')\r\n})\r\n\r\napp.get('/api/persons', (request, response) => {\r\n    response.json(persons)\r\n})\r\n\r\n\r\nfunction checkTime(i) {\r\n  if (i < 10) {\r\n    i = \"0\" + i\r\n  }\r\n  return i\r\n}\r\n\r\nfunction getCurrentDateTime() {\r\n  var now = new Date()\r\n  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\r\n  var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\r\n  var day = days[now.getDay()]\r\n  var month = months[now.getMonth()]\r\n  var date = now.getDate()\r\n  var year = now.getFullYear()\r\n  var h = now.getHours()\r\n  var m = now.getMinutes()\r\n  var s = now.getSeconds()\r\n  m = checkTime(m)\r\n  s = checkTime(s)\r\n\r\n  return `${day} ${month} ${date} ${year} ${h}:${m}:${s}  GMT+0200 (Eastern European Standard Time)`\r\n}\r\n\r\napp.get('/info', (request, response) => {\r\n  const param1 = persons.length;\r\n  const param2 = getCurrentDateTime();\r\n  response.send(`Phonebook has info for ${param1} people <br/><br/>${param2}`)\r\n})\r\n\r\nconst generateId = () => {\r\n    const maxId = persons.length > 0\r\n        ? Math.max(...persons.map(n => n.id))\r\n        : 0\r\n    return maxId + 1\r\n}\r\n\r\napp.post('/api/persons', (request, response) => {\r\n    const body = request.body\r\n    console.log(request.body)\r\n\r\n\r\nif (!body.name || !body.number) {\r\n    response.status(400).json({ error: \"Name or number is missing\" })\r\n}\r\n\r\n    let value = false \r\n    persons.map(person => {\r\n        if(person.name==body.name) {value = true}\r\n    })\r\n\r\n    if(value){\r\n        response.status(400).json({ error: \"Name must be unique\" })\r\n    }\r\n    else{\r\n        const person = {\r\n            id: generateId(),\r\n            name: body.name,\r\n            number: body.number,\r\n            \r\n        }\r\n        persons = persons.concat(person)\r\n        response.json(person)\r\n    }\r\n})\r\n\r\napp.get('/api/persons/:id', (request, response) => {\r\n    const id = Number(request.params.id)\r\n    const person = persons.find(person => person.id === id)\r\n    if (person) {\r\n        response.json(person)\r\n    } else {\r\n        response.status(404).send('Person not found')\r\n    }\r\n})\r\n\r\napp.delete('/delete/:id', (request, response) => {\r\n    const id = Number(request.params.id)\r\n    persons = persons.filter(person => person.id !== id)\r\n    response.send(`${id} Deleted!`)\r\n})\r\n\r\nconst PORT = 3001;\r\napp.listen(PORT, () => {\r\n    console.log(`Server running on port ${PORT}`)\r\n\r\n})"],"mappings":"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"}},"mtime":1710877121983}}